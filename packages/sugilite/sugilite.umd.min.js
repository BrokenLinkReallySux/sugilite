"use strict";!function(e,n){const o="undefined"!=typeof window&&"document"in window;var t;o&&"function"==typeof define&&define.amd?define(["jquery","exports"],(e,t)=>n(window,e,o,t)):"object"==typeof module&&"object"==typeof module.exports?o?n(window,require("jquery"),o,module.exports):(t=require("jsdom")["JSDOM"],t=new t,n(window,require("jquery")(t.window),o,module.exports)):n(window,e.jQuery,o,e.sugilite={})}("undefined"!=typeof window?window:this,function(l,s,u,e){Object.defineProperty(e,"__esModule",{value:!0});class f{#effects=[];#value;constructor(e){this.#value=e}effect(e){this.#effects.push(e)}get value(){return this.#value}set value(e){u&&(this.#value=e,this.#effects.forEach(e=>e()))}}function t(e){return new f(e)}t.depends=function(e,t){const n=new f(t());return e.forEach(e=>{if(!e instanceof f)throw new Error("dependencies must be a signal");e.effect(()=>n.value=t())}),n};class o{#effects=[];#contents;constructor(e){this.#contents=e}get content(){return this.#contents}set content(e){u&&(this.#contents.replaceWith(e),this.#contents=e,this.#effects.forEach(e=>e()))}}function r(e){return new o(e)}function d(t,n){if(["boolean","string","number","float"].includes(typeof t))s(n).append(l.document.createTextNode(String(t)));else if(t instanceof f){let e=l.document.createTextNode(t.value);s(n).append(e),t.effect(()=>e.textContent=t.value)}else t instanceof o?s(n).append(t.content):Array.isArray(t)?t.forEach(e=>d(e,n)):s(n).append(t)}function a(t,n,...r){if("function"==typeof t)return t({...n,children:r});if("string"!=typeof t)throw new Error("tag must be function or string");{let o=l.document.createElement(t);if(null!==n&&"object"==typeof n){const a=["css$","bindVal$","className","htmlFor"],i=/^ev\$([a-z]+)$/;if(u&&Object.keys(n).filter(e=>i.test(e)).forEach(e=>{s(o).on(e.replace(i,"$1"),n[e])}),"css$"in n&&"object"==typeof n.css$&&s(o).css(n.css$),"className"in n&&(o.className=n.className),"htmlFor"in n&&(o.htmlFor=n.htmlFor),"bindVal$"in n){if(!n.bindVal$ instanceof f)throw new Error("bindVal$ must be a signal");s(o).val(n.bindVal$.value),u&&(s(o).on("input",function(){n.bindVal$.value=s(this).val()}),n.bindVal$.effect(()=>{s(o).val()!==n.bindVal$.value&&s(o).val(n.bindVal$.value)}))}Object.keys(n).filter(e=>!a.includes(e)&&!i.test(e)).forEach(e=>{o.setAttribute(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n[e])})}let e=!1;for(const c of r)if(c instanceof Promise){e=!0;break}return e?new Promise((t,n)=>{Promise.all(r).then(e=>{e.forEach(e=>d(e,o)),t(s(o))}).catch(e=>n(e))}):(r.forEach(e=>d(e,o)),s(o))}}function i({children:e}){let t=l.document.createDocumentFragment();return e.forEach(e=>d(e,t)),s(t)}function n({children:e,predicate:t}){if(!t instanceof f)throw new Error("'predicate' must be a boolean signal");if("boolean"!=typeof t.value)throw new Error("'predicate' must be a boolean signal");if(2!==e.length)throw new Error("the 'Case' component can take exactly two children");var n=a(i,null,...e);return(!0===t.value?e[1]:e[0]).hide(),t.effect(()=>{(!0===t.value?(e[1].hide(),e[0]):(e[0].hide(),e[1])).show()}),n}function c({children:o,array:e,wrapper:t="div"}){if(!e instanceof f)throw new Error("the 'array' attribute must be an array signal");if(!Array.isArray(e.value))throw new Error("the 'array' attribute must be an array signal");if(1!==o.length)throw new Error("the 'Each' compononent takes only one child, which should be a function");if("function"!=typeof o[0])throw new Error("the 'Each' compononent takes only one child, which should be a function");if("string"!=typeof t&&"function"!=typeof t)throw new Error("the 'wrapper' attribute must be a component or a string");const n=document.createDocumentFragment(),r=(n.append(...e.value.map((e,t,n)=>a(i,null,o[0](e,t,n))[0])),a(t,null,s(n)));return e.effect(function(){n.replaceChildren(...e.value.map((e,t,n)=>a(i,null,o[0](e,t,n))[0])),r[0].replaceChildren(n)}),r}function h({children:e,fallback:t=null}){const n=r(t||s(document.createTextNode("")));return Promise.all(e).then(e=>{n.content=a(i,null,...e)}),n.content}var w={c:a,f:i,Signal:f,signal:t,Slot:o,slot:r,Case:n,Each:c,Patience:h};e.Case=n,e.Each=c,e.Patience=h,e.Signal=f,e.Slot=o,e.c=a,e.default=w,e.f=i,e.signal=t,e.slot=r});