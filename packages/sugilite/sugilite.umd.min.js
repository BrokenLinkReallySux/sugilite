"use strict";!function(e,t){const n="undefined"!=typeof window&&"document"in window;if(n&&"function"==typeof define&&define.amd)define(["jquery","exports"],((e,o)=>t(window,e,n,o)));else if("object"!=typeof module||"object"!=typeof module.exports)t(window,e.jQuery,n,e.sugilite={});else if(n)t(window,require("jquery"),n,module.exports);else{const{JSDOM:e}=require("jsdom"),o=new e;t(window,require("jquery")(o.window),n,module.exports)}}("undefined"!=typeof window?window:this,(function(e,t,n,o){class r{#e=[];#t;constructor(e){this.#t=e}effect(e){this.#e.push(e)}get value(){return this.#t}set value(e){n&&(this.#t=e,this.#e.forEach((e=>e())))}}function i(e){return new r(e)}i.depends=function(e,t){const n=new r(t());return e.forEach((e=>{if(!e instanceof r)throw new Error("dependencies must be a signal");e.effect((()=>n.value=t()))})),n};class a{#e=[];#n;constructor(e){this.#n=e}get content(){return this.#n}set content(e){n&&(this.#n.replaceWith(e),this.#n=e,this.#e.forEach((e=>e())))}}function c(e){return new a(e)}function s(n,o){if(["boolean","string","number","float"].includes(typeof n))t(o).append(e.document.createTextNode(String(n)));else if(n instanceof r){let r=e.document.createTextNode(n.value);t(o).append(r),n.effect((()=>r.textContent=n.value))}else n instanceof a?t(o).append(n.content):Array.isArray(n)?n.forEach((e=>s(e,o))):t(o).append(n)}function l(o,i,...a){if("function"==typeof o)return o({...i,children:a});if("string"==typeof o){let c=e.document.createElement(o);if(null!==i&&"object"==typeof i){const e=["css$","bindVal$","className","htmlFor"],o=/^ev\$([a-z]+)$/;if(n&&Object.keys(i).filter((e=>o.test(e))).forEach((e=>{t(c).on(e.replace(o,"$1"),i[e])})),"css$"in i&&"object"==typeof i.css$&&t(c).css(i.css$),"className"in i&&(c.className=i.className),"htmlFor"in i&&(c.htmlFor=i.htmlFor),"bindVal$"in i){if(!i.bindVal$ instanceof r)throw new Error("bindVal$ must be a signal");t(c).val(i.bindVal$.value),n&&(t(c).on("input",(function(){i.bindVal$.value=t(this).val()})),i.bindVal$.effect((()=>{t(c).val()!==i.bindVal$.value&&t(c).val(i.bindVal$.value)})))}Object.keys(i).filter((t=>!e.includes(t)&&!o.test(t))).forEach((e=>{c.setAttribute(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i[e])}))}let l=!1;for(const e of a)if(e instanceof Promise){l=!0;break}return l?new Promise(((e,n)=>{Promise.all(a).then((n=>{n.forEach((e=>s(e,c))),e(t(c))})).catch((e=>n(e)))})):(a.forEach((e=>s(e,c))),t(c))}throw new Error("tag must be function or string")}function f({children:n}){let o=e.document.createDocumentFragment();return n.forEach((e=>s(e,o))),t(o)}o.Case=function({children:e,predicate:t}){if(!t instanceof r)throw new Error("'predicate' must be a boolean signal");if("boolean"!=typeof t.value)throw new Error("'predicate' must be a boolean signal");if(2!==e.length)throw new Error("the 'Case' component can take exactly two children");const n=l(f,null,...e);return!0===t.value?e[1].hide():e[0].hide(),t.effect((()=>{!0===t.value?(e[1].hide(),e[0].show()):(e[0].hide(),e[1].show())})),n},o.Each=function({children:e,array:n,wrapper:o="div"}){if(!n instanceof r)throw new Error("the 'array' attribute must be an array signal");if(!Array.isArray(n.value))throw new Error("the 'array' attribute must be an array signal");if(1!==e.length)throw new Error("the 'Each' compononent takes only one child, which should be a function");if("function"!=typeof e[0])throw new Error("the 'Each' compononent takes only one child, which should be a function");if("string"!=typeof o&&"function"!=typeof o&&("object"!=typeof o||!("jquery"in o)))throw new Error("the 'wrapper' attribute must be a component, string, or jquery object");const i=document.createDocumentFragment();let a;return i.append(...n.value.map(((t,n,o)=>l(f,null,e[0](t,n,o))[0]))),"object"==typeof o?(a=o,o.append(i)):a=l(o,null,t(i)),n.effect((function(){i.replaceChildren(...n.value.map(((t,n,o)=>l(f,null,e[0](t,n,o))[0]))),a[0].replaceChildren(i)})),a},o.Patience=function({children:e,fallback:n=null}){const o=c(n||t(document.createTextNode("")));return Promise.all(e).then((e=>{o.content=l(f,null,...e)})),o.content},o.Signal=r,o.Slot=a,o.c=l,o.f=f,o.signal=i,o.slot=c}));
